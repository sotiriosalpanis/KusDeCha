{"version":3,"sources":["components/Collections/ObjectCard.js","components/Collections/InstitutionSearchPreview.js","components/Collections/SearchBar.js","auth/helpers/auth.js","components/Navbar.js","components/collections/InstitutionCard.js","components/collections/InstitutionIndex.js","components/collections/ObjectCard.js","components/collections/InstitutionShow.js","auth/Login.js","auth/Register.js","components/collections/CreateScrapbook.js","components/collections/AddToScrapbook.js","components/collections/OpenSeaDragonViewer.js","components/collections/ObjectShow.js","components/collections/ScrapbookImageCard.js","components/collections/Scrapbooks.js","components/collections/InstitutionSearchPreview.js","components/collections/ScrapbookShow.js","components/collections/InstitutionShowSearch.js","App.js","index.js"],"names":["ObjectCard","thumbnail","size","disabled","useState","objectImage","setObjectImage","useEffect","a","axios","get","url","data","getData","imageURLRoot","imageHeight","sizes","height","imageWidth","width","imageFormat","profile","formats","image","className","src","InstitutionSearchPreview","searchTerm","searchResults","setSearchResults","results","map","result","id","to","SearchBar","setSearchTerm","search","setSearch","activeModal","setActiveModal","searchActive","setSearchActive","handleChange","event","target","value","onChange","onMouseEnter","onMouseLeave","placeholder","aria-label","onClick","getTokenFromLocalStorage","window","localStorage","getItem","getPayloadFromToken","token","parts","split","length","JSON","parse","atob","userIsOwner","userId","payload","sub","userIsAuthenticated","Math","round","Date","now","exp","Navbar","institutions","setInstitutions","dropdown","setDropdown","history","useHistory","location","useLocation","pathname","role","institution","institution_name","replace","removeItem","push","InstitutionCard","props","description","InstitutionIndex","InstitutionShow","apiRoot","setInstitution","pageNumber","setPageNumber","pageSize","setPageSize","searchSet","setSearchSet","imageArray","setimageArray","imageToPost","setImageToPost","selectScrapbook","setSelectScrapbook","scrapbookBody","setScrapbookBody","disableButton","setdisableButton","handleSelect","updatedResults","imageToAdd","imageToAddObject","origin_institution","digital_image_id","source","catalogue_image_id","catalogue_title","title","work_type","type","iiif_manifest","tags","handleSelectSearch","post","headers","Authorization","console","log","request","handleSubmit","preventDefault","put","response","totalResults","err","existingImages","digital_images","updatedScrapbookBody","defaultValue","scrapbook","index","name","Login","username","password","formData","setFormData","newFormData","setItem","errors","onSubmit","Register","email","password_confirmation","registrationSuccess","setregistrationSuccess","registrationFail","setregistrationFail","Object","entries","key","CreateScrapbook","AddToScrapbook","digitalImage","selectedDigitalImage","newScrapbook","setNewScrapbook","handleImageSelection","existingDigitalImage","filter","scrapbooksAlreadyAddedTo","digiImage","OpenSeaDragonViewer","iiifManifestURL","viewer","setViewer","InitOpenseadragon","destroy","OpenSeaDragon","preserveViewport","animationTime","zoomPerScroll","visibilityRatio","zoomInButton","zoomOutButton","fullPageButton","showNavigator","tileSources","href","style","ObjectShow","useParams","imageCatalogue","setImageCatalogue","ScrapbookImageCard","imageInfo","setImage","imageURL","Scrapbooks","scrapbooks","setScrapbooks","modalScrapbook","setModalScrapbook","handleModal","scrapbookModal","creator","floor","random","ScrapbookShow","setScrapbook","editable","setEditable","handleDelete","delete","InstitutionShowSearch","hash","totalPages","App","exact","path","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.cdbb94ce.chunk.js","sourcesContent":["import axios from 'axios'\nimport React, { useState, useEffect } from 'react'\n// import { Link } from 'react-router-dom'\n\nconst ObjectCard = ({ thumbnail, size, disabled }) => {\n\n  // console.log(!disabled)\n\n  const [ objectImage, setObjectImage ] = useState(null)\n\n  useEffect(() => {\n    const getData = async() => {\n      const { data } = await axios.get(thumbnail.url)\n      setObjectImage( data )\n    }\n    getData()\n  },[])\n\n  if (!objectImage) return null\n\n  const imageURLRoot = objectImage['@id']\n  const imageHeight = objectImage.sizes[size].height\n  const imageWidth = objectImage.sizes[size].width\n  const imageFormat = objectImage.profile[1].formats\n  const image = `${imageURLRoot}/full/${imageWidth},${imageHeight}/0/default.${imageFormat}`\n\n  return (\n    <div className='card'>\n      <div className='card-image'\n      >\n        {!disabled ?\n          <img src={image}\n            className='preview'\n          />\n          :\n          <img src={image}\n            className='selected-object preview'\n          />\n\n        }\n\n      </div>\n      \n    </div>\n  )\n}\n\nexport default ObjectCard\n","import React, { useState, useEffect } from 'react'\nimport axios from 'axios'\nimport ObjectCard from './ObjectCard'\nimport { Link } from 'react-router-dom'\n\nconst InstitutionSearchPreview = ( { searchTerm }) => {\n\n\n  const apiRoot = 'https://api.wellcomecollection.org/catalogue/v2/'\n  const [ searchResults, setSearchResults ] = useState(null)\n\n  useEffect(() => {\n    const getData = async() => {\n      const { data } = await axios.get(`${apiRoot}images?pageSize=5&page=1&query=${searchTerm}/`)\n      setSearchResults(data)\n    }\n    getData()\n  },[searchTerm])\n\n  if (!searchResults) return null\n\n  return (\n    <div className='box search-preview'>\n      <h4 className='subtitle is-3'>Preview results for {searchTerm}</h4>\n      <div className='columns is-multiline'>\n        {searchResults.results.map(result => {\n          return <div className='column' key={result.id}> \n            <ObjectCard  {...result} size={2} />\n          </div>\n        })}\n        \n      </div>\n      <Link to={`/search#${searchTerm}`}>See full results here</Link>\n    </div>\n  )\n}\n\nexport default InstitutionSearchPreview\n","import React, { useState, useEffect } from 'react'\nimport InstitutionSearchPreview from './InstitutionSearchPreview'\n\nconst SearchBar = () => {\n\n  const [ searchTerm, setSearchTerm ] = useState('')\n  const [ search, setSearch ] = useState('')\n  const [ activeModal, setActiveModal ] = useState(null)\n  const [searchActive, setSearchActive ] = useState(false)\n\n  const handleChange = event => {\n    setSearchTerm(event.target.value)\n    if (!event.target.value) setSearch(false)\n  }\n\n  const handleModal = () => {\n    setActiveModal(null)\n  }\n\n  const handleEnter = () => {\n    setSearchActive(false)\n  }\n  const handleLeave = () => {\n    setSearchActive(true)\n  }\n\n  useEffect(() => {\n    setSearch(searchTerm)\n    setActiveModal('is-active')\n  },[searchTerm])\n\n  return (\n    <div>\n      <div className='field'>\n        <form className='is-quarter'>\n          <input \n            // className='input'\n            className={ searchActive ? 'input' : 'search-bar input'}\n            value={searchTerm}\n            onChange={handleChange}\n            onMouseEnter={handleEnter}\n            onMouseLeave={handleLeave}\n            placeholder='Enter search term to find more images...'\n          />\n        </form>\n        { search ?\n          <div className={`modal ${activeModal}`}>\n            <div className='modal-background'></div>\n            <div className='modal-card'>\n              <input \n                className='input'\n                value={searchTerm}\n                onChange={handleChange}\n              />\n              <InstitutionSearchPreview className='box' searchTerm={search}/>\n            </div>\n            <button \n              className='modal-close is-large' \n              aria-label='close'\n              onClick={handleModal}\n            >\n            </button>\n          </div>\n              \n          :\n          <p></p>\n        }\n      </div>\n    </div>\n  )\n}\n\nexport default SearchBar\n","export const getTokenFromLocalStorage = () => {\n  return window.localStorage.getItem('token')\n}\n\nexport const getPayloadFromToken = () => {\n  const token = getTokenFromLocalStorage()\n  if ( !token ) return false\n  const parts = token.split('.')\n  if ( parts.length < 3 ) return false\n  return JSON.parse(atob(parts[1]))\n}\n\nexport const userIsOwner = userId => {\n  const payload = getPayloadFromToken()\n  if ( !payload ) return false\n  // console.log(userId, payload.sub)\n  return userId === payload.sub\n}\n\nexport const userIsAuthenticated = () => {\n  const payload = getPayloadFromToken()\n  if ( !payload ) return false\n  const now = Math.round(Date.now() / 1000 )\n  return now < payload.exp\n}\n\n\n\nexport default getTokenFromLocalStorage","import React, { useEffect, useState } from 'react'\nimport { Link, useHistory, useLocation } from 'react-router-dom'\nimport SearchBar from './Collections/SearchBar'\nimport { userIsAuthenticated } from '../auth/helpers/auth'\nimport axios from 'axios'\n\nconst Navbar = () => {\n\n  const [ institutions, setInstitutions ] = useState(null)\n  const [dropdown, setDropdown ] = useState(false)\n  const history = useHistory()\n\n  const handleLogout = () => {\n    window.localStorage.removeItem('token')\n    history.push('/')\n  }\n\n  const location = useLocation()\n  useEffect(() => {\n  }, [location.pathname])\n\n\n\n  useEffect(() => {\n    const getData = async() => {\n      const { data } = await axios.get('/api/institutions/')\n      setInstitutions(data)\n    }\n    getData()\n  },[])\n\n  if (!institutions) return null\n\n  return (\n    <nav className=\"navbar is-transparent is-fixed-top\" role=\"navigation\">\n      <div id='navbarBasicExample' className='navbar-menu'>\n        <div className='navbar-start'>\n          { dropdown ? \n            <div \n              className='navbar-item has-dropdown is-active'\n              onMouseLeave={() => setDropdown(false)}  \n            >\n              <Link className='navbar-link' to='/explore'>\n                  Explore\n              </Link>\n                  \n              <div className='navbar-dropdown'>\n                {institutions.map(institution => {\n                  return <Link \n                    key={institution.id} \n                    className='navbar-item'\n                    to={`/explore/${institution.institution_name.replace(' ','')}`}\n                  >\n                    {institution.institution_name}\n                  </Link>\n        \n                })}\n              </div>\n            </div>\n            :\n            <div \n              className='navbar-item has-dropdown'\n              onMouseEnter={() => setDropdown(true)}    \n            >\n              <Link className='navbar-link' to='/explore'>\n                Explore\n              </Link>\n                \n              <div className='navbar-dropdown'>\n                {institutions.map(institution => {\n                  return <Link \n                    key={institution.id} \n                    className='navbar-item'\n                    to={`/explore/${institution.institution_name.replace(' ','')}`}\n                  >\n                    {institution.institution_name}\n                  </Link>\n                })}\n              </div>\n            </div>  \n          }\n        </div>\n        <div className='navbar-end'>\n          <div className='navbar-item'>\n            <SearchBar />\n          </div>\n          <div>\n            <Link className='navbar-item' to='/scrapbooks'>\n          Scrapbooks\n            </Link>\n          </div>\n          { !userIsAuthenticated() &&\n          <>\n            <div>\n              <Link className='navbar-item' to='/login'>\n                Login\n              </Link>\n            </div>\n            <div>\n              <Link className='navbar-item' to='/register'>\n                Register\n              </Link>\n            </div>\n          </>\n          }\n\n          { userIsAuthenticated() &&\n            <div>\n              <Link to='/explore' onClick={handleLogout} className=\"navbar-item\">Log out</Link>\n            </div>\n          }\n        </div>\n          \n        \n      </div>\n    </nav>\n\n  )\n}\n\nexport default Navbar\n","import React from 'react'\n\nconst InstitutionCard = ( { props } ) => {\n\n\n  return (\n    <section className='hero hero-image is-halfheight'>\n      <div className='hero-body'>\n        <h2 className='title is-2'>{props.institution_name}</h2>\n        <hr />\n        <p className='title is-3'>{props.description}</p>\n        {/* <a href={props.website} className='title is-5'>Visit the {props.institution_name} website </a> */}\n      </div>\n    </section>\n\n  )\n}\n\nexport default InstitutionCard\n","import React, { useEffect, useState } from 'react'\nimport axios from 'axios'\nimport { Link } from 'react-router-dom'\nimport InstitutionCard from './InstitutionCard'\n\nfunction InstitutionIndex() {\n\n  const [ institutions, setInstitutions ] = useState(null)\n\n  useEffect(() => {\n    const getData = async() => {\n      const { data } = await axios.get('/api/institutions/')\n      setInstitutions(data)\n    }\n    getData()\n  },[])\n\n  \n\n  return (\n    <div className='section home'>\n      <div className='level explore-page is-vcentered'>\n        { institutions && \n        <div className=\"column is-three-fifths is-offset-one-fifth\">\n          { institutions.map(institution => (\n\n            <Link to={`/explore/${institution.institution_name.replace(' ','')}`} key={institution.id}>\n              <InstitutionCard props={institution}/>\n            </Link>\n\n          ))}\n        </div>\n        }\n      </div>\n      <div className=\"background\">\n        <span></span>\n        <span></span>\n        <span></span>\n        <span></span>\n        <span></span>\n        <span></span>\n        <span></span>\n        <span></span>\n        <span></span>\n        <span></span>\n        <span></span>\n        <span></span>\n        <span></span>\n        <span></span>\n        <span></span>\n        <span></span>\n        <span></span>\n        <span></span>\n        <span></span>\n        <span></span>\n      </div>\n    </div>\n\n  )\n\n}\n\nexport default InstitutionIndex\n","import axios from 'axios'\nimport React, { useState, useEffect } from 'react'\n// import { Link } from 'react-router-dom'\n\nconst ObjectCard = ({ thumbnail, size, disabled }) => {\n\n  // console.log(!disabled)\n\n  const [ objectImage, setObjectImage ] = useState(null)\n\n  useEffect(() => {\n    const getData = async() => {\n      const { data } = await axios.get(thumbnail.url)\n      setObjectImage( data )\n    }\n    getData()\n  },[])\n\n  if (!objectImage) return null\n\n  const imageURLRoot = objectImage['@id']\n  const imageHeight = objectImage.sizes[size].height\n  const imageWidth = objectImage.sizes[size].width\n  const imageFormat = objectImage.profile[1].formats\n  const image = `${imageURLRoot}/full/${imageWidth},${imageHeight}/0/default.${imageFormat}`\n\n  return (\n    <div className='card'>\n      <div className='card-image'\n      >\n        {!disabled ?\n          <img src={image}\n            className='preview'\n          />\n          :\n          <img src={image}\n            className='selected-object preview'\n          />\n\n        }\n\n      </div>\n      \n    </div>\n  )\n}\n\nexport default ObjectCard\n","import React, { useEffect, useState } from 'react'\nimport axios from 'axios'\nimport { Link, useHistory } from 'react-router-dom'\nimport getTokenFromLocalStorage from '../../auth/helpers/auth'\n\n\nimport ObjectCard from './ObjectCard'\n\nconst InstitutionShow = ( ) => {\n\n\n  const apiRoot = 'https://api.wellcomecollection.org/catalogue/v2/'\n  const history = useHistory()\n\n  const [ institution, setInstitution ] = useState(null)\n\n  const [ pageNumber, setPageNumber ] = useState(1)\n  const [ pageSize, setPageSize ] = useState(50)\n\n  const [searchTerm, setSearchTerm ] = useState('')\n  const [searchSet, setSearchSet ] = useState(null)\n  const [ imageArray, setimageArray ] = useState([])\n  const [ imageToPost, setImageToPost ] = useState({})\n  const [ selectScrapbook, setSelectScrapbook ] = useState(null)\n  const [ scrapbookBody, setScrapbookBody ] = useState({})\n\n  const [ disableButton, setdisableButton ] = useState(false)\n\n\n  useEffect(() => {\n    const getData = async() => {\n      const { data } = await axios.get(`${apiRoot}images?pageSize=${pageSize}&page=${pageNumber}`)\n      setInstitution(data)\n    }\n    getData()\n  },[pageNumber, pageSize])\n\n  useEffect(() => {\n    const getData = async() => {\n      const { data } = await axios.get(`${apiRoot}images?pageSize=${pageSize}&page=${pageNumber}&query=${searchTerm}`)\n      setSearchSet(data)\n    }\n    getData()\n  },[searchTerm, pageNumber, pageSize])\n\n\n  const handleChange = event => {\n    try {\n      setSearchTerm(event.target.value)\n    } catch (err) {\n      console.log(err)\n    }\n  }\n\n  const handlePageSize = event => {\n    setPageSize(event.target.value)\n  }\n\n  const handleNextPage = () => {\n    const nextPage = pageNumber + 1\n    setPageNumber(nextPage)\n  }\n  const handlePreviousPage = () => {\n    const nextPage = pageNumber - 1\n    setPageNumber(nextPage)\n  }\n\n  const handleSelect = (event) => {\n    const imageToAdd = institution.results[event.target.value]\n    const imageToAddObject = {\n      origin_institution: 1,\n      digital_image_id: imageToAdd.source.id,\n      catalogue_image_id: imageToAdd.id,\n      catalogue_title: imageToAdd.source.title,\n      work_type: imageToAdd.source.type,\n      iiif_manifest: imageToAdd.thumbnail.url,\n      tags: [],\n    }\n    let updatedResults\n    if (imageToAdd.disabled) {\n      updatedResults = { ...imageToAdd, ['disabled']: false }\n      institution.results[event.target.value] = updatedResults\n    } else {\n      setImageToPost({ ...imageToAddObject })\n      updatedResults = { ...imageToAdd, ['disabled']: true }\n    }\n    institution.results[event.target.value] = updatedResults\n    setdisableButton(!disableButton)\n  }\n\n  const handleSelectSearch = (event) => {\n    const imageToAdd = searchSet.results[event.target.value]\n    const imageToAddObject = {\n      origin_institution: 1,\n      digital_image_id: imageToAdd.source.id,\n      catalogue_image_id: imageToAdd.id,\n      catalogue_title: imageToAdd.source.title,\n      work_type: imageToAdd.source.type,\n      iiif_manifest: imageToAdd.thumbnail.url,\n      tags: [],\n    }\n    let updatedResults\n    if (imageToAdd.disabled) {\n      updatedResults = { ...imageToAdd, ['disabled']: false }\n      institution.results[event.target.value] = updatedResults\n    } else {\n      setImageToPost({ ...imageToAddObject })\n      updatedResults = { ...imageToAdd, ['disabled']: true }\n    }\n    searchSet.results[event.target.value] = updatedResults\n    setdisableButton(!disableButton)\n  }\n\n  useEffect( async() => {\n    try {\n      const { data } = await axios.post('/api/images/', imageToPost, {\n        headers: {\n          Authorization: `Bearer ${getTokenFromLocalStorage()}`,\n        },\n      })\n      setimageArray([ ...imageArray, data.id ])\n      console.log(imageArray)\n    } catch (err) {\n      console.log(err.request)\n    }\n    \n  },[imageToPost])\n\n  useEffect(() => {\n    const getData = async() => {\n      const { data } = await axios.get('/api/scrapbooks/')\n      setSelectScrapbook(data)\n    }\n    getData()\n  },[])\n\n  const handleScrapbookSelect = event => {\n    if (event.target.value !== 'new') {\n      let existingImages = []\n      if (selectScrapbook[event.target.value].digital_images.length > 0) {\n        existingImages = selectScrapbook[event.target.value].digital_images.map(image => image.id)\n        \n      }\n      const updatedScrapbookBody = { ...selectScrapbook[event.target.value], ['digital_images']: [ ...existingImages, ...imageArray ] }\n      setScrapbookBody(updatedScrapbookBody)\n    }\n  }\n\n  const handleSubmit = async event => {\n    event.preventDefault()\n    try {\n      const response = await axios.put(`/api/scrapbooks/${scrapbookBody.id}/`,scrapbookBody, {\n        headers: {\n          Authorization: `Bearer ${getTokenFromLocalStorage()}`,\n        },\n      })\n      console.log('Success',response)\n      history.push(`/scrapbooks/${response.data.id}`)\n    } catch (err) {\n      console.log('Scrapbook error',err.response.data)\n    }\n  }\n\n\n  if (!institution) return null\n\n  \n  return (\n    <div className='section institution'>\n      <div className='container'>\n        <div className='box sticky-header'>\n          <nav className='pagination is-right' role='navigation' aria-label='pagination'>\n            <a\n              className='pagination-next'\n              onClick={handleNextPage}\n            >+</a>\n            <ul className='pagination-list'>\n              <li>\n                <a className='pagination-link'>Pg {pageNumber}</a>\n              </li>\n            </ul>\n            {pageNumber > 1  ?\n              <>\n                <a\n                  className='pagination-previous'\n                  onClick={handlePreviousPage}\n                >-</a>\n              </>\n              :\n              <>\n                <a\n                  className='pagination-previous'\n                  disabled\n                >-</a>\n              </>\n            }\n          </nav>\n          <h2 className='subtitle is-2'>Explore the Wellcome Collection</h2>\n          {!searchTerm ? <p className='subtitle is-5'>Browse {institution.totalResults} images</p>\n            : <p className='subtitle is-5'>&apos;{searchTerm}&apos; returned {searchSet.totalResults}</p>\n          }\n          <form className='columns is-8'>\n            <div className='control column'>\n              <input\n                className='input'\n                onChange={handleChange}\n                value={searchTerm}\n                placeholder='Search'\n              />\n            </div>\n            <div className='control column is-2 is-offset-2'>\n              <select onChange={handlePageSize} className='select'>\n                <option value={50}>50</option>\n                <option value={75}>75</option>\n                <option value={100}>100</option>\n              </select>\n            </div>\n          </form>\n          \n          { imageArray.length > 0 &&\n              <div>\n                <form>\n                  <div className='select'>\n                    <select \n                      onChange={handleScrapbookSelect}\n                      defaultValue='Choose a scrapbook'\n                    >\n                      <option\n                        disabled={true}\n                      >Choose a scrapbook</option>\n                      {selectScrapbook.map((scrapbook, index) => {\n                        return <option\n                          key={scrapbook.id}\n                          value={index}\n                        >\n                          {scrapbook.name}\n                        </option>\n                      })}\n                    </select>\n                  </div>\n                </form>\n                <button\n                  className='button create-scrapbook'\n                  onClick={handleSubmit}\n                >\n              Add\n                </button>\n              </div>\n          }\n            \n        </div>\n        <div>\n          <div className='columns is-multiline results-page'>\n            {!searchTerm ? institution.results.map((result, index )=> {\n              return <div key={result.id}\n                className='relative-container object'\n              >\n                <Link\n                  to={ `/object/${result.id}`}\n                >\n                  <ObjectCard  { ...result } size={1} disabled={result.disabled}/>\n                </Link>\n                <button\n                  className='absolute-container button is-info is-small is-inverted is-rounded'\n                  value={index}\n                  onClick={handleSelect}\n                >\n                  X\n                </button>\n              </div>\n\n            })\n              :\n              searchSet.results.map((result, index) => {\n                return <div key={result.id}\n                  className='relative-container'\n                >\n                  <Link\n                    to={ `/object/${result.id}`}\n                  >\n                    <ObjectCard  { ...result } size={1} disabled={result.disabled}/>\n                  </Link>\n                \n                  <button\n                    className='absolute-container button is-info is-small is-inverted is-rounded'\n                    value={index}\n                    onClick={handleSelectSearch}\n                  >\n                  X\n                  </button>\n                </div>\n            \n              })\n            }\n          </div>\n        </div>\n      </div>    \n    </div>\n  )\n}\n\nexport default InstitutionShow\n","import React, { useState } from 'react'\nimport { useHistory } from 'react-router-dom'\nimport axios from 'axios'\n\nconst Login = () => {\n\n  const history = useHistory()\n\n  const [ formData, setFormData ] = useState({\n    username: '',\n    password: '',\n  })\n\n  const handleChange = event => {\n    const newFormData = { ...formData, [event.target.name]: event.target.value }\n    setFormData(newFormData)\n  }\n\n  const handleSubmit = async event => {\n    event.preventDefault()\n    try {\n      const response = await axios.post('/api/auth/login/',formData)\n      window.localStorage.setItem('token', response.data.token )\n      history.push('/explore')\n    } catch (err) {\n      console.log(err.response.data.errors)\n    }\n  }\n\n\n  return (\n    <section className='section home'>\n      <div className='container'>\n        <div className='columns'>\n          <form className='box column is-half is-offset-one-quarter auth-form' onSubmit={handleSubmit}>\n            <div>\n              <h3 className='subtitle'>Login</h3>\n            </div>\n            <div className='field'>\n              <label className='label'>Username</label>\n              <div className='control'>\n                <input\n                  className='input is-medium'\n                  placeholder='Username'\n                  name='username'\n                  value={formData.username}\n                  onChange={handleChange}\n                />\n              </div>\n            </div>\n            <div className='field'>\n              <label className='label'>Password</label>\n              <div className='control'>\n                <input\n                  className='input is-medium'\n                  type='password'\n                  placeholder='Enter your password'\n                  name='password'\n                  value={formData.password}\n                  onChange={handleChange}\n                />\n              </div>\n            </div>\n            <div className='field'>\n              <button className='button' type='submit'>Login</button>\n            </div>\n          </form>\n        </div>\n        \n      </div>\n      <div className=\"background\">\n        <span></span>\n        <span></span>\n        <span></span>\n        <span></span>\n        <span></span>\n        <span></span>\n        <span></span>\n        <span></span>\n        <span></span>\n        <span></span>\n        <span></span>\n        <span></span>\n        <span></span>\n        <span></span>\n        <span></span>\n        <span></span>\n        <span></span>\n        <span></span>\n        <span></span>\n        <span></span>\n      </div>\n\n    </section>\n  )\n}\n\nexport default Login\n","import React, { useState } from 'react'\nimport axios from 'axios'\n\nconst Register = () => {\n\n  const [ formData, setFormData ] = useState({\n    username: '',\n    email: '',\n    password: '',\n    password_confirmation: '',\n  })\n\n  const handleChange = event => {\n    const newFormData = { ...formData, [event.target.name]: event.target.value }\n    setFormData(newFormData)\n  }\n\n  const [ registrationSuccess, setregistrationSuccess ] = useState(null)\n  const [ registrationFail, setregistrationFail ] = useState(null)\n\n  const handleSubmit = async event => {\n    event.preventDefault()\n    try {\n      const response = await axios.post('/api/auth/register/',formData)\n      console.log(response.data)\n      setregistrationSuccess(true)\n    } catch (err) {\n      console.log()\n      for (const [key, value] of Object.entries(err.response.data)) {\n        console.log(key, value[0])\n        setregistrationFail(`${key} : ${value[0]}`)\n      }\n    }\n  }\n\n\n\n  return (\n    <section className='section'>\n      <div className='container'>\n        <div className='columns'>\n          <form className='box column is-half is-offset-one-quarter auth-form' onSubmit={handleSubmit}>\n            <div>\n              <h3 className='subtitle'>Register</h3>\n            </div>\n            <div className='field'>\n              <label className='label'>Username</label>\n              <div className='control'>\n                <input\n                  className='input is-medium'\n                  placeholder='Username'\n                  name='username'\n                  value={formData.username}\n                  onChange={handleChange}\n                />\n              </div>\n            </div>\n            <div className='field'>\n              <label className='label'>Email</label>\n              <div className='control'>\n                <input\n                  className='input is-medium'\n                  placeholder='someone@example.com'\n                  name='email'\n                  value={formData.email}\n                  onChange={handleChange}\n                />\n              </div>\n            </div>\n            <div className='field'>\n              <label className='label'>Password</label>\n              <div className='control'>\n                <input\n                  className='input is-medium'\n                  type='password'\n                  placeholder='Enter your password'\n                  name='password'\n                  value={formData.password}\n                  onChange={handleChange}\n                />\n              </div>\n            </div>\n            <div className='field'>\n              <label className='label'>Password confirmation</label>\n              <div className='control'>\n                <input\n                  className='input is-medium'\n                  type='password'\n                  placeholder='Confirm your password'\n                  name='password_confirmation'\n                  value={formData.password_confirmation}\n                  onChange={handleChange}\n                />\n              </div>\n            </div>\n            <div className='field'>\n              <button className='button' type='submit'>Register</button>\n            </div>\n            <div>\n              { registrationFail ?\n                <>\n                  <p className='help is-danger'>Oh no! There is a problem</p>\n                  <p className='help is-danger'>{registrationFail}</p>\n                </>\n                :\n                <p></p>\n              }\n              { registrationSuccess ?\n                <>\n                  <p className='help is-success'>Yay! You registered successfully</p>\n                  <p className='help is-success'>Please log in</p>\n                </>\n                :\n                <p></p>\n              }\n              \n              \n            </div>\n          \n          </form>\n\n        </div>\n      </div>\n      <div className=\"background\">\n        <span></span>\n        <span></span>\n        <span></span>\n        <span></span>\n        <span></span>\n        <span></span>\n        <span></span>\n        <span></span>\n        <span></span>\n        <span></span>\n        <span></span>\n        <span></span>\n        <span></span>\n        <span></span>\n        <span></span>\n        <span></span>\n        <span></span>\n        <span></span>\n        <span></span>\n        <span></span>\n      </div>\n    </section>\n  )\n}\n\nexport default Register\n","import axios from 'axios'\nimport React, { useState } from 'react'\nimport { useHistory } from 'react-router'\nimport getTokenFromLocalStorage from '../../auth/helpers/auth'\n\nconst CreateScrapbook = () => {\n\n  const history = useHistory()\n\n  const [ formData, setFormData ] = useState({ \n    name: '' ,\n    digital_images: [],  \n  })\n\n  const handleChange = event => {\n    console.log(formData)\n    const newFormData = { ...formData, [event.target.name]: event.target.value }\n    setFormData(newFormData)\n  }\n\n  const handleSubmit = async event => {\n    event.preventDefault()\n    console.log(formData)\n    try {\n      const { data } = await axios.post('/api/scrapbooks/',formData, {\n        headers: {\n          Authorization: `Bearer ${getTokenFromLocalStorage()}`,\n        },\n      })\n      console.log('Scrapbook',data)\n      history.push(`scrapbooks/${data.id}`)\n    } catch (err) {\n      console.log(err.response.data.errors)\n    }\n    \n  }\n\n\n  return (\n    <div className='create-scrapbook'>\n      <form onSubmit={handleSubmit}>\n        <div className='field'>\n          <input\n            className='input'\n            placeholder='Give your Scrapbook a name'\n            name='name'\n            value={formData.name}\n            onChange={handleChange}\n          >\n          </input>\n        </div>\n     \n        <div className='field'>\n          <button \n            type='submit'\n            className='button'\n          >Create\n          </button>\n        </div>\n      </form>\n    </div>\n\n\n  )\n}\n\nexport default CreateScrapbook\n","import React, { useEffect, useState } from 'react'\nimport axios from 'axios'\n\nimport getTokenFromLocalStorage from '../../auth/helpers/auth'\nimport CreateScrapbook from './CreateScrapbook'\nimport { Link } from 'react-router-dom'\n\nconst AddToScrapbook = ( { id,  source, thumbnail } ) => {\n\n  const [ digitalImage, selectedDigitalImage ] = useState([])\n  const [ selectScrapbook, setSelectScrapbook ] = useState(null)\n  const [ newScrapbook, setNewScrapbook ] = useState(false)\n  const [ activeModal, setActiveModal ] = useState(null)\n  const [ scrapbookBody, setScrapbookBody ] = useState({\n    origin_institution: 1,\n    digital_image_id: source.id,\n    catalogue_image_id: id,\n    catalogue_title: source.title,\n    work_type: source.type,\n    iiif_manifest: thumbnail.url,\n    tags: [],\n  })\n\n\n\n\n  const handleImageSelection = async() => {\n    if (!digitalImage) {\n      try {\n        const { data } = await axios.post('/api/images/', scrapbookBody, {\n          headers: {\n            Authorization: `Bearer ${getTokenFromLocalStorage()}`,\n          },\n        })\n        const digitalImageArray =  data \n        selectedDigitalImage(digitalImageArray)\n      } catch (err) {\n        console.log(err.response)\n      }\n    } else {\n      console.log('Already exists- skipped', digitalImage)\n    }\n    setActiveModal('is-active')\n  }\n\n  useEffect(() => {\n    const getData = async() => {\n      const { data } = await axios.get('/api/scrapbooks/')\n      setSelectScrapbook(data)\n    }\n    getData()\n  },[activeModal])\n  \n  useEffect(() => {\n    const getData = async() => {\n      const { data } = await axios.get('/api/images/')\n      const existingDigitalImage = data.filter(image => {\n        return image.catalogue_image_id === id\n      })\n      if (existingDigitalImage.length === 0) {\n        selectedDigitalImage(null)\n      } else {\n        selectedDigitalImage( ...existingDigitalImage )\n      }\n\n    }\n    getData()\n  },[])\n\n  if (!selectScrapbook) return null\n\n  const handleChange = event => {\n    if (event.target.value !== 'new') {\n      setNewScrapbook(false)\n      let existingImages = []\n      if (selectScrapbook[event.target.value].digital_images.length > 0) {\n        existingImages = selectScrapbook[event.target.value].digital_images.map(image => image.id)\n        \n      }\n      const updatedScrapbookBody = { ...selectScrapbook[event.target.value], ['digital_images']: [...existingImages, digitalImage.id ] }\n      setScrapbookBody(updatedScrapbookBody)\n    } else {\n      setNewScrapbook(true)\n    }\n\n  }\n\n  const handleSubmit = async event => {\n    event.preventDefault()\n    try {\n      const response = await axios.put(`/api/scrapbooks/${scrapbookBody.id}/`,scrapbookBody, {\n        headers: {\n          Authorization: `Bearer ${getTokenFromLocalStorage()}`,\n        },\n      })\n      console.log('Success',response)\n      setActiveModal(null)\n    } catch (err) {\n      console.log('Scrapbook error',err.response.data)\n      setActiveModal(null)\n    }\n  }\n\n  const handleModalClose = () => {\n    setActiveModal(null)\n  }\n\n  const scrapbooksAlreadyAddedTo = selectScrapbook.filter(scrapbook => {\n    const alreadyAddedto = scrapbook.digital_images.filter(digiImage => {\n      return digiImage.catalogue_image_id === id\n    })\n    return alreadyAddedto.length > 0\n  })\n\n\n  return (\n    <div className='container box'>\n      <div className='columns'>\n        {scrapbooksAlreadyAddedTo.length !== 0 ?\n          <>\n            <p className='column subtitle is-5'>Scrapbooks </p>\n            { scrapbooksAlreadyAddedTo.map(scrapbook => {\n              return <Link to={`/scrapbooks/${scrapbook.id}`} \n                className='box scrapbook'\n                key={scrapbook.id}>\n                <p className='subtitle is-6'>{scrapbook.name}</p>\n              </Link>\n            })}\n          </>\n          :\n          <p>Not part of any scrapbooks</p>\n        }\n      </div>\n      <button className='button'\n        onClick={handleImageSelection}\n      >\n        +\n      </button>\n      <div className={`modal ${activeModal}`}>\n        <div className='modal-background'></div>\n        <div className='modal-card'>\n          <div className='columns'>\n            <div className='box column is-half is-offset-one-quarter popup'>\n              <p className='subtitle is-4'>Add image to a scrapbook</p>\n              <form>\n                <div className='select'>\n                  <select \n                    onChange={handleChange}\n                    defaultValue='Choose a scrapbook'\n                  >\n                    <option\n                      disabled={true}\n                    >Choose a scrapbook</option>\n                    {selectScrapbook.map((scrapbook, index) => {\n                      return <option\n                        key={scrapbook.id}\n                        value={index}\n                      >\n                        {scrapbook.name}\n                      </option>\n                    })}\n                    <option\n                      value='new'\n                    >New</option>\n                  </select>\n                </div>\n              </form>\n              {newScrapbook ?\n                <div>\n                  <CreateScrapbook />\n                </div>\n                :\n                <p></p>\n              }\n              <div className='field'>\n                <button\n                  className='button'\n                  onClick={handleSubmit}\n                >+</button>\n              </div>\n            </div>\n            \n            <button \n              className='modal-close is-large' \n              aria-label='close'\n              onClick={handleModalClose}\n            >\n            </button>\n          </div>\n        </div>\n      </div>\n    </div>\n  )\n}\n\nexport default AddToScrapbook\n","import OpenSeaDragon from 'openseadragon'\nimport React, { useEffect, useState } from 'react'\n\nconst OpenSeaDragonViewer = ( { iiifManifestURL } ) => {\n\n  const [viewer, setViewer] = useState(null)\n\n  useEffect(() => {\n    InitOpenseadragon()\n    return () => {\n      viewer && viewer.destroy()\n    }\n  }, [])\n\n\n  const InitOpenseadragon = () => {\n    viewer && viewer.destroy()\n    setViewer(\n      OpenSeaDragon({\n        id: 'openSeaDragon',\n        preserveViewport: true,\n        animationTime: 0.5,\n        zoomPerScroll: 2,\n        visibilityRatio: 0.5,\n        zoomInButton: 'zoom-in',\n        zoomOutButton: 'zoom-out',\n        fullPageButton: 'full-page',\n        showNavigator: true,\n        tileSources: iiifManifestURL,\n      })\n    )\n  }\n\n  return (\n    <section>\n      <div className='columns'>\n        <div className='column'>\n          <a className='button' id='full-page' href='#full-page' title=\"Zoom in\">Full page</a>\n          <a className='button' id='zoom-in' href='#zoom-in' title=\"Zoom in\">+</a>\n          <a className='button' id='zoom-out' href='#zoom-out' title=\"Zoom in\">-</a>\n        </div>\n      </div>\n      <div \n        id=\"openSeaDragon\" \n        style={{\n          height: '700px',\n          width: '1200px',\n        }}\n      >\n      </div>\n    </section>\n\n  )\n \n}\n\nexport default OpenSeaDragonViewer\n","import React, { useState, useEffect } from 'react'\nimport axios from 'axios'\nimport { useParams } from 'react-router-dom'\nimport AddToScrapbook from './AddToScrapbook'\nimport OpenSeaDragonViewer from './OpenSeaDragonViewer'\n\n\nconst ObjectShow = () => {\n\n\n  const { id } = useParams()\n\n  const [ imageCatalogue, setImageCatalogue ] = useState(null)\n\n  useEffect(() => {\n    const getData = async() => {\n      const { data } = await axios.get(`https://api.wellcomecollection.org/catalogue/v2/images/${id}/`)\n      setImageCatalogue(data)\n    } \n    getData()\n  },[])\n\n  if (!imageCatalogue) return null\n\n\n  return (\n    <section className='section objects'>\n      <div className='container'>\n        <div className='box'>\n          <div className='columns'>\n            <div className='column is-8'>\n              <h2 className='subtitle is-3'>{imageCatalogue.source.title}</h2>\n            </div>\n            <div className='column is-4'>\n              <AddToScrapbook { ...imageCatalogue } />\n            </div>\n          </div>\n          \n        </div>\n\n        <div className='box'>\n          <OpenSeaDragonViewer iiifManifestURL={imageCatalogue.thumbnail.url}/>\n        </div>\n      \n      </div>\n    </section>\n    \n    \n  )\n}\n\nexport default ObjectShow\n","import axios from 'axios'\nimport React, { useEffect, useState } from 'react'\n// import { Link } from 'react-router-dom'\n\nconst ScrapbookImageCard = ( { imageInfo, size }) => {\n\n  // console.log(size)\n\n\n  const [ image, setImage ] = useState(null)\n\n  useEffect(() => {\n    const getData = async() => {\n      const { data } = await axios.get(`${imageInfo.iiif_manifest}`)\n      setImage(data)\n    }\n    getData()\n  },[])\n\n\n\n  if (!image) return null\n\n  const imageURLRoot = image['@id']\n  const imageHeight = image.sizes[size].height\n  const imageWidth = image.sizes[size].width\n  const imageFormat = image.profile[1].formats\n  const imageURL = `${imageURLRoot}/square/${imageWidth},${imageHeight}/0/default.${imageFormat}`\n\n  // to\n\n  return (\n    <section>\n      <div>\n        <img\n          src={imageURL} />\n      </div>\n      \n    </section>\n  )\n}\n\nexport default ScrapbookImageCard\n","import axios from 'axios'\nimport React, { useEffect, useState } from 'react'\nimport { Link } from 'react-router-dom'\n\nimport CreateScrapbook from './CreateScrapbook'\nimport ScrapbookImageCard from './ScrapbookImageCard'\n\nconst Scrapbooks = () => {\n\n  const [ scrapbooks, setScrapbooks ] = useState(null)\n  const [ activeModal, setActiveModal ] = useState(null)\n  const [ modalScrapbook, setModalScrapbook ] = useState({\n    id: '',\n    digital_images: [],\n    name: '',\n  })\n\n  useEffect(() =>{\n    const getData = async() => {\n      const { data } = await axios.get('api/scrapbooks/')\n      setScrapbooks(data)\n    }\n    getData()\n  },[])\n\n  const handleModal = (event) => {\n    if (!activeModal) {\n      const scrapbookModal = scrapbooks.filter(scrapbook => scrapbook.name === event.target.value)\n      setModalScrapbook({ ...scrapbookModal[0] })\n      setActiveModal('is-active')\n    } else {\n      setActiveModal(null)\n    }\n    \n  }\n\n  if (!scrapbooks) return null\n\n  return (\n    <section className='section scrapbooks'>\n      <div className='container'>\n        <h3 className='subtitle is-2'>Scrapbooks</h3>\n        <div className='box'>\n          <CreateScrapbook />\n        </div>\n        <div className='columns is-multiline'>\n          { scrapbooks.map(scrapbook => {\n            return <div key={scrapbook.id}>\n              <div className='box column relative-container'>\n                <h4 className='subtitle is-4'>{scrapbook.name}</h4>\n                <p className='subtitle is-6'>Created by: {scrapbook.creator.username}</p>\n                { scrapbook.digital_images.length > 0 ?\n                  <>\n                    <ScrapbookImageCard \n                      imageInfo={scrapbook.digital_images[Math.floor(Math.random() * scrapbook.digital_images.length)]}\n                      size={1}\n                    />\n                    <div className={`modal ${activeModal}`}>\n                      <div className='modal-background'></div>\n                      <div className='modal-card'>\n                        <p className='subtitle is-4'>{modalScrapbook.name}</p>\n                        <Link to={`/scrapbooks/${modalScrapbook.id}`}>\n                          <button className='button'>Go to {modalScrapbook.name}</button>\n                        </Link>\n                        <div className='columns is-multiline'>\n\n                          {modalScrapbook.digital_images.map(image => {\n                            return <div key={image.id}>\n                              <div className='column'>\n                                <ScrapbookImageCard  \n                                  imageInfo={image} \n                                  size={2}\n                                />\n                              </div>\n\n                            </div>\n                          \n                          })\n\n                          }\n                        </div>\n                        <button \n                          className='modal-close is-large' \n                          aria-label='close'\n                          onClick={handleModal}\n                        >\n                        </button>\n\n                      </div>\n                    </div>\n                  </>\n                  :\n                  <p>No images added yet...</p>\n                }\n                <button\n                  className='button'\n                  onClick={handleModal}\n                  value={scrapbook.name}\n                >\n                  {scrapbook.digital_images.length} images</button>\n              </div>\n              \n            </div>\n          })}\n        </div>\n      </div>\n    </section>\n    \n  )\n}\n\nexport default Scrapbooks\n","import React, { useState, useEffect } from 'react'\nimport axios from 'axios'\nimport ObjectCard from './ObjectCard'\nimport { Link } from 'react-router-dom'\n\nconst InstitutionSearchPreview = ( { searchTerm }) => {\n\n\n  const apiRoot = 'https://api.wellcomecollection.org/catalogue/v2/'\n  const [ searchResults, setSearchResults ] = useState(null)\n\n  useEffect(() => {\n    const getData = async() => {\n      const { data } = await axios.get(`${apiRoot}images?pageSize=5&page=1&query=${searchTerm}/`)\n      setSearchResults(data)\n    }\n    getData()\n  },[searchTerm])\n\n  if (!searchResults) return null\n\n  return (\n    <div className='box search-preview'>\n      <h4 className='subtitle is-3'>Preview results for {searchTerm}</h4>\n      <div className='columns is-multiline'>\n        {searchResults.results.map(result => {\n          return <div className='column' key={result.id}> \n            <ObjectCard  {...result} size={2} />\n          </div>\n        })}\n        \n      </div>\n      <Link to={`/search#${searchTerm}`}>See full results here</Link>\n    </div>\n  )\n}\n\nexport default InstitutionSearchPreview\n","import axios from 'axios'\nimport React, { useEffect, useState } from 'react'\nimport { useParams, useHistory } from 'react-router'\nimport InstitutionSearchPreview from './InstitutionSearchPreview'\nimport ScrapbookImageCard from './ScrapbookImageCard'\nimport { userIsOwner, getTokenFromLocalStorage } from '../../auth/helpers/auth'\nimport { Link } from 'react-router-dom'\n\nconst ScrapbookShow = () => {\n\n  \n\n  const history = useHistory()\n\n  const [ scrapbook, setScrapbook ] = useState({\n    name: '',\n    creator: {},\n    digital_images: [],\n  })\n\n  const [ searchTerm, setSearchTerm ] = useState('')\n  const [ search, setSearch ] = useState('')\n  const [ activeModal, setActiveModal ] = useState(null)\n  const [ formData, setFormData ] = useState({\n    name: scrapbook.name,\n  })\n  const [ editable, setEditable ] = useState(false)\n\n\n  const { id } = useParams()\n\n  useEffect(() => {\n    const getData = async() => {\n      const { data } = await axios.get(`/api/scrapbooks/${id}/`)\n      setScrapbook(data)\n    }\n    getData()\n  },[editable])\n\n  const handleChange = event => {\n    setSearchTerm(event.target.value)\n    if (!event.target.value) setSearch(false)\n  }\n\n  const handleEdit = () => {\n    setEditable(!editable)\n  }\n\n  const handleFormUpdate = event => {\n    const newFormData = { ...formData, [event.target.name]: event.target.value }\n    setFormData(newFormData)\n  }\n\n  const handleSubmit = async event => {\n    event.preventDefault()\n    try {\n      const { data } = await axios.put(`/api/scrapbooks/${id}/`,formData , {\n        headers: {\n          Authorization: `Bearer ${getTokenFromLocalStorage()}`,\n        },\n      })\n      console.log(data)\n      setEditable(!editable)\n    } catch (err) {\n      console.log(err.response.data)\n    }\n  }\n\n  const handleModal = () => {\n    console.log('Click')\n    setActiveModal(null)\n  }\n\n\n  useEffect(() => {\n    setSearch(searchTerm)\n    setActiveModal('is-active')\n  },[searchTerm])\n\n  const handleDelete = async event => {\n    event.preventDefault()\n    try {\n      const { data } = await axios.delete(`/api/scrapbooks/${id}/`, {\n        headers: {\n          Authorization: `Bearer ${getTokenFromLocalStorage()}`,\n        },\n      })\n      console.log(data)\n      history.push('/scrapbooks')\n    } catch (err) {\n      console.log(err.response.data)\n    }\n  }\n\n  if (!scrapbook) return null\n\n  \n\n  return (\n    <section className='section scrapbooks'>\n      <div className='container'>\n        <div className='box'>\n          {!editable ?\n            <h2 className='subtitle is-2'\n            >\n              {scrapbook.name}</h2>\n            :\n            <div className='columns'>\n              <div className='column'>\n                <form \n                  onSubmit={handleSubmit}>\n                  <div className='column is-8'>\n                    <input\n                      className='is-medium input'\n                      value={formData.name}\n                      name='name'\n                      onChange={handleFormUpdate}\n                      placeholder={scrapbook.name}\n                    />\n                  </div>\n                  <div className='column is-2'>\n                    <button\n                      className='button'  \n                    >+</button>\n                  </div>\n                </form>\n              </div>\n            </div>\n          }\n          <h3 className='subtitle'>by {scrapbook.creator.username} </h3>\n          { userIsOwner(scrapbook.creator.id) &&\n            <div>\n              <button\n                className='button'\n                onClick={handleEdit}\n              >Edit</button>\n              <button\n                className='button'\n                onClick={handleDelete}\n              >Delete</button>\n            </div> \n          }\n          <div className='field search-box'>\n            <form className='is-quarter'>\n              <input \n                className='input'\n                value={searchTerm}\n                onChange={handleChange}\n                placeholder='Enter search term to find more images...'\n              />\n            </form>\n            { search ?\n              <div className={`modal ${activeModal}`}>\n                <div className='modal-background'></div>\n                <div className='modal-card'>\n                  <input \n                    className='input'\n                    value={searchTerm}\n                    onChange={handleChange}\n                  />\n                  <InstitutionSearchPreview className='box' searchTerm={search}/>\n                </div>\n                <button \n                  className='modal-close is-large' \n                  aria-label='close'\n                  onClick={handleModal}\n                >\n                </button>\n              </div>\n              \n              :\n              <p></p>\n            }\n          </div>\n        </div>\n        \n        <div className='columns is-multiline results-page'>\n          {scrapbook.digital_images.length > 0 ?\n            scrapbook.digital_images.map(image => {\n              return <div \n                key={image.id}\n                className='box relative-container object'\n              >\n                <Link\n                  to={ `/object/${image.catalogue_image_id}`}\n                >\n                  <ScrapbookImageCard  imageInfo={image} size={1}/>\n                </Link>\n                \n              </div>\n            })\n            :\n            <p>No images</p>\n          }\n        </div>\n        \n      </div>\n    </section>\n    \n  )\n}\n\nexport default ScrapbookShow\n","import React, { useState, useEffect } from 'react'\nimport axios from 'axios'\nimport { Link, useLocation } from 'react-router-dom'\nimport ObjectCard from './ObjectCard'\nimport getTokenFromLocalStorage from '../../auth/helpers/auth'\n\nconst InstitutionShowSearch = ( ) => {\n  \n  const { hash } = useLocation()\n  const searchTerm = hash.replace('#','')\n  const apiRoot = 'https://api.wellcomecollection.org/catalogue/v2/'\n\n  const [ searchResults, setSearchResults ] = useState(null)\n  const [ pageNumber, setPageNumber ] = useState(1)\n  const [ imageToPost, setImageToPost ] = useState({})\n  const [ disableButton, setdisableButton ] = useState(false)\n  const [ imageArray, setimageArray ] = useState([])\n  const [ scrapbookBody, setScrapbookBody ] = useState({})\n  const [ selectScrapbook, setSelectScrapbook ] = useState(null)\n\n  const pageSize = 100\n\n  useEffect(() => {\n    const getData = async() => {\n      const { data } = await axios.get(`${apiRoot}images?pageSize=${pageSize}&page=${pageNumber}&query=${searchTerm}/`)\n      setSearchResults(data)\n    }\n    getData()\n  },[pageNumber])\n\n\n  const handleNextPage = () => {\n    const nextPage = pageNumber + 1\n    setPageNumber(nextPage)\n  }\n  const handlePreviousPage = () => {\n    const nextPage = pageNumber - 1\n    setPageNumber(nextPage)\n  }\n\n  const handleSelect = (event) => {\n    const imageToAdd = searchResults.results[event.target.value]\n    const imageToAddObject = {\n      origin_institution: 1,\n      digital_image_id: imageToAdd.source.id,\n      catalogue_image_id: imageToAdd.id,\n      catalogue_title: imageToAdd.source.title,\n      work_type: imageToAdd.source.type,\n      iiif_manifest: imageToAdd.thumbnail.url,\n      tags: [],\n    }\n    let updatedResults\n    if (imageToAdd.disabled) {\n      updatedResults = { ...imageToAdd, ['disabled']: false }\n      searchResults.results[event.target.value] = updatedResults\n    } else {\n      setImageToPost({ ...imageToAddObject })\n      updatedResults = { ...imageToAdd, ['disabled']: true }\n    }\n    searchResults.results[event.target.value] = updatedResults\n    setdisableButton(!disableButton)\n  }\n\n  useEffect( async() => {\n    try {\n      const { data } = await axios.post('/api/images/', imageToPost, {\n        headers: {\n          Authorization: `Bearer ${getTokenFromLocalStorage()}`,\n        },\n      })\n      setimageArray([ ...imageArray, data.id ])\n      console.log(imageArray)\n    } catch (err) {\n      console.log(err.request)\n    }\n    \n  },[imageToPost])\n\n  useEffect(() => {\n    const getData = async() => {\n      const { data } = await axios.get('/api/scrapbooks/')\n      setSelectScrapbook(data)\n    }\n    getData()\n  },[])\n\n  const handleScrapbookSelect = event => {\n    if (event.target.value !== 'new') {\n      let existingImages = []\n      if (selectScrapbook[event.target.value].digital_images.length > 0) {\n        existingImages = selectScrapbook[event.target.value].digital_images.map(image => image.id)\n        \n      }\n      const updatedScrapbookBody = { ...selectScrapbook[event.target.value], ['digital_images']: [ ...existingImages, ...imageArray ] }\n      setScrapbookBody(updatedScrapbookBody)\n    }\n  }\n\n  const handleSubmit = async event => {\n    event.preventDefault()\n    try {\n      const response = await axios.put(`/api/scrapbooks/${scrapbookBody.id}/`,scrapbookBody, {\n        headers: {\n          Authorization: `Bearer ${getTokenFromLocalStorage()}`,\n        },\n      })\n      console.log('Success',response)\n      setimageArray([])\n    } catch (err) {\n      console.log('Scrapbook error',err.response.data)\n    }\n  }\n\n\n\n  if (!searchResults) return null\n\n\n  return (\n    <section className='section institution'>\n      <div className='container'>\n        <div className='box sticky-header'>\n          <h2 className='subtitle is-3'>You searched for {searchTerm}</h2>\n          <h3 className='subtitle'>There are {searchResults.totalResults} results on {searchResults.totalPages} pages</h3>\n\n          <div>\n            <nav className='pagination is-left' role='navigation' aria-label='pagination'>\n              <a\n                className='pagination-next'\n                onClick={handleNextPage}\n              >+</a>\n\n              <ul className='pagination-list'>\n                <li>\n                  <a className='pagination-link'>Pg {pageNumber}</a>\n                </li>\n\n              </ul>\n\n              {pageNumber > 1  ?\n                <>\n                  <a\n                    className='pagination-previous'\n                    onClick={handlePreviousPage}\n                  >-</a>\n                </>\n                :\n                <>\n                  <a\n                    className='pagination-previous'\n                    disabled\n                  >-</a>\n                </>\n              }\n            </nav>\n            { imageArray.length > 0 &&\n              <div>\n                <form>\n                  <div className='select'>\n                    <select \n                      onChange={handleScrapbookSelect}\n                      defaultValue='Choose a scrapbook'\n                    >\n                      <option\n                        disabled={true}\n                      >Choose a scrapbook</option>\n                      {selectScrapbook.map((scrapbook, index) => {\n                        return <option\n                          key={scrapbook.id}\n                          value={index}\n                        >\n                          {scrapbook.name}\n                        </option>\n                      })}\n                    </select>\n                  </div>\n                </form>\n                <button\n                  className='button'\n                  onClick={handleSubmit}\n                >\n              Add\n                </button>\n              </div>\n            }\n          </div>\n        </div>\n        <section>\n          <div className='columns is-multiline results-page'>\n            {searchResults.results.map((result,index) => {\n              return <div key={result.id}\n                className='relative-container object'\n              >\n                <Link\n                  to={ `/object/${result.id}`}\n                >\n                  <ObjectCard  { ...result } size={1} disabled={result.disabled}/>\n                </Link>\n                \n                <button\n                  className='absolute-container button is-info is-small is-inverted'\n                  value={index}\n                  onClick={handleSelect}\n                >\n                  X\n                </button>\n              </div>\n\n            })}\n          </div>\n\n        </section>\n\n        \n      </div>\n    </section>\n    \n  )\n}\n\nexport default InstitutionShowSearch\n","import React from 'react'\nimport { BrowserRouter, Route, Switch } from 'react-router-dom'\n\nimport Navbar from './components/Navbar'\nimport InstitutionIndex from './components/collections/InstitutionIndex'\nimport InstitutionShow from './components/collections/InstitutionShow'\nimport Login from './auth/Login'\nimport Register from './auth/Register'\nimport ObjectShow from './components/collections/ObjectShow'\nimport Scrapbooks from './components/collections/Scrapbooks'\nimport ScrapbookShow from './components/collections/ScrapbookShow'\nimport InstitutionShowSearch from './components/collections/InstitutionShowSearch'\n\n\nconst App = () => {\n\n  return (\n    <div className='has-navbar-fixed-top'>\n      <BrowserRouter>\n        <Navbar />\n        <Switch>\n          <Route exact path='/explore'>\n            <InstitutionIndex />\n          </Route>\n          <Route exact path='/search'>\n            <InstitutionShowSearch />\n          </Route>\n          <Route path='/login'>\n            <Login />\n          </Route>\n          <Route path='/register'>\n            <Register />\n          </Route>\n          <Route path='/explore/:id'>\n            <InstitutionShow />\n          </Route>\n          <Route path='/object/:id'>\n            <ObjectShow />\n          </Route>\n          <Route exact path='/scrapbooks'>\n            <Scrapbooks />\n          </Route>\n          <Route path='/scrapbooks/:id'>\n            <ScrapbookShow />\n          </Route>\n        </Switch>\n      </BrowserRouter>\n    </div>\n  )\n}\n\nexport default App\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport './styles/main.scss'\nimport App from './App'\n\nReactDOM.render(<App />, document.getElementById('root'))"],"sourceRoot":""}